# SYSTEM LAW — CORE (CANON)
FILE: 01_SYSTEM_LAW/00__SYSTEM_LAW.md

SCOPE: Universe Engine
LAYER: 01_SYSTEM_LAW
DOC_TYPE: LAW_CORE
LEVEL: L0
STATUS: ACTIVE
LOCK: FIXED
VERSION: 1.1.0
UID: UE.LAW.CORE.000
OWNER: SYSTEM
ROLE: Absolute core law of the Universe Engine. Defines authority, canon rules, identifiers, existence via indexes, and conflict resolution.

CHANGE_NOTE:
- DATE: 2026-01-07
- TYPE: MINOR
- SUMMARY: "Нормализован CORE LAW под Doc Control: единая шапка, UID/LOCK, аксиомы системы, правила конфликтов"
- REASON: "Устранение противоречий и фиксация единого ядра"
- IMPACT: "Все слои/индексы/реестры, канон-протокол, идентификация"

---

## 0) PRIME DIRECTIVE (ABSOLUTE)
Universe Engine — это система, где:
- канон управляем,
- навигация однозначна,
- истина единична (Single SoT),
- изменения трассируются,
- идентификаторы стабильны.

Любое правило, нарушающее эти принципы, считается НЕСОВМЕСТИМЫМ с системой.

---

## 1) DEFINITIONS (TERMS)
**LAW** — системный закон верхнего уровня. Может запрещать/разрешать/определять правила для всех слоёв.  
**STANDARD (SoT)** — стандарт/спека “как должно быть” для конкретного слоя/модуля.  
**PROTOCOL** — операционная процедура (как делать изменения/общение/пайплайн).  
**TEMPLATE** — форма/структура документа/артефакта (не закон и не SoT).  
**REGISTRY / INDEX** — реестр состава: список канонических файлов/типов/схем/пайплайнов.

**CANON** — всё, что признано системой существующим и применимым (registered + compliant).  
**NON-CANON** — файл существует физически, но не признан системой (не зарегистрирован или нарушает правила).

**SoT (Source of Truth)** — единственная точка истины по конкретному смыслу/правилу.  
**MODULE** — детализация/расширение правила, но НЕ замена SoT и НЕ второй SoT.

---

## 2) AUTHORITY (ORDER OF POWER)
### 2.1 Абсолютный приоритет
1) Этот файл: `00__SYSTEM_LAW.md` (CORE LAW) — абсолютный корень.
2) Индекс слоя законов: `00__INDEX__SYSTEM_LAW.md` — навигационный закон состава/порядка LAW.
3) Остальные LAW-файлы (01..07) — по приоритету, указанному в индексе слоя.

### 2.2 Приоритет между слоями
- **01_SYSTEM_LAW** выше всех остальных слоёв.
- **02_STANDARDS** обязаны подчиняться 01_SYSTEM_LAW.
- **04_KNOWLEDGE_BASE** обязана подчиняться 01_SYSTEM_LAW и governance KB.

---

## 3) EXISTENCE RULE (ABSOLUTE)
### 3.1 Существование через INDEX
Для каждого слоя, который претендует быть каноничным, должен существовать **его мастер-индекс** (L1).
Правило:
- если артефакт/файл не зарегистрирован в мастер-индексе слоя — он **не существует** для системы.
- если файл зарегистрирован, но нарушает Doc Control/ID/Versioning — он **невалиден** (подлежит исправлению или снятию из индекса).

### 3.2 Единственный entrypoint
У слоя должен быть **один** канонический entrypoint index.
Любые “alt/legacy index” запрещены как канон.
Допускаются только как **NON-CANON ALIASES** (явно вынесенные и не влияющие на навигацию).

---

## 4) SINGLE SOURCE OF TRUTH (NO DUPLICATION)
### 4.1 Закон единого смысла
Один смысл → один SoT документ.
- SoT не дублируется в других SoT.
- Modules не дублируют SoT, а только уточняют/расширяют и обязательно ссылаются на SoT.

### 4.2 Запрет двойной власти
Запрещено, чтобы модуль или шаблон объявлял себя “Source of Truth”, если SoT уже существует.
Если нужен новый SoT — он создаётся явно и заменяет старый через Canon Protocol.

---

## 5) IDENTIFICATION LAW (UID IS SYSTEM LANGUAGE)
### 5.1 UID — единственный системный идентификатор
**UID** — единственный язык идентификации, применимый для:
- реестров (INDEX/REGISTRY),
- кросс-ссылок (REL/XREF),
- пайплайнов,
- артефакт-типов/схем,
- системных сущностей.

Правило:
- любая каноническая сущность/документ/артефакт обязан иметь UID в шапке.
- ссылки между сущностями системы выполняются через UID.

### 5.2 Local IDs (разрешены, но НЕ системные)
Внутри контента/проектов допускаются “локальные ID” (например сцены/шоты/версии внутри конкретного проекта),
НО:
- они не могут заменять UID в реестрах/пайплайнах,
- при выходе за границы локального контекста должны иметь мост: `LOCAL_ID -> UID` (через паспорт/реестр).

Итог: локальные ID — вспомогательные, UID — канонический язык системы.

---

## 6) NAMING LAW (FILES / FOLDERS)
Имена файлов/папок должны быть машинно-предсказуемыми и согласованными с индексами.

Минимум:
- Номер в имени файла должен совпадать с номером в индексе слоя.
- Если существует конфликт нумерации — решается переименованием или явным исключением в `01__NAMING_RULES.md`.

---

## 7) VERSIONING & CHANGE LAW
### 7.1 Единый формат версии
Канонические документы используют SemVer: `MAJOR.MINOR.PATCH`.

### 7.2 Изменение канона
Любая правка, которая меняет состав, порядок, смысл правил или интерфейс артефактов, считается изменением канона.
Такие изменения обязаны проходить Canon Protocol и фиксироваться change-note в документе/PR.

---

## 8) DOC CONTROL (MANDATORY)
### 8.1 Обязательная шапка
Каждый канонический документ обязан иметь в шапке:
SCOPE / LAYER / STATUS / LOCK / VERSION / UID / OWNER / ROLE (+ FILE).

### 8.2 Единственная истина метаданных
Запрещено дублировать/повторять `OWNER`, `LOCK`, `VERSION`, `STATUS` внизу документа отдельными строками.
Одна истина — в шапке.

### 8.3 LOCK правила
- `LOCK: FIXED` — документ считается законом/каноном: любые правки только по Canon Protocol.
- `LOCK: OPEN` — допускается свободная работа (черновик), но такой документ не может считаться L0/L1 каноном.

---

## 9) CONFLICT RESOLUTION (WHEN LAWS COLLIDE)
Если обнаружен конфликт:
1) Проверить приоритет (раздел 2).
2) Побеждает документ более высокого уровня/приоритета.
3) Проигравший документ должен быть исправлен (или понижен до NON-CANON) через Canon Protocol.
4) До исправления конфликт помечается явно в проигравшем документе как `CONFLICT FLAG` (вверху).

---

## 10) CANON CHANGE GATE (MINIMUM CHECKLIST)
Любая каноническая правка должна проходить минимум:
- соблюдение Doc Control,
- отсутствие дубля смысла (Single SoT),
- регистрация в правильном INDEX,
- валидная версия SemVer,
- совместимость с UID law,
- отсутствие альтернативных entrypoints.

---

## 11) POINTERS (NAVIGATION)
Слой законов и навигация:
- `01_SYSTEM_LAW/00__INDEX__SYSTEM_LAW.md` (мастер-реестр законов)
- `01_SYSTEM_LAW/01__NAMING_RULES.md`
- `01_SYSTEM_LAW/02__UID_RULES.md`
- `01_SYSTEM_LAW/03__VERSIONING_CHANGE_POLICY.md`
- `01_SYSTEM_LAW/04__CANON_PROTOCOL.md`
- `01_SYSTEM_LAW/05__ARTIFACT_SCHEMA_REGISTRY.md`
- `01_SYSTEM_LAW/06__CONSTRAINTS_REGISTRY.md`
- `01_SYSTEM_LAW/07__PIPELINE_REGISTRY.md`

---

## FINAL RULE (ABSOLUTE)
Если правило/документ/индекс нарушает этот CORE LAW — он не может быть каноничным, пока не приведён в соответствие.
--- END.

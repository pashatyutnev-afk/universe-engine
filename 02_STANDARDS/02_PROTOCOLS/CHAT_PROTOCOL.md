# UNIVERSE ENGINE — CHAT PROTOCOL
## Протокол работы с чатами и сессиями
## Уровень: L1 · Mandatory

---

## 0. НАЗНАЧЕНИЕ ДОКУМЕНТА

Этот документ определяет:
- как запускаются новые чаты
- как чаты получают контекст
- как избегается перегруз и путаница
- как фиксируются изменения через INDEX

Цель протокола:
> любой новый чат должен работать так,
> как будто система развивалась в одном чате годами.

---

## 1. РОЛЬ ЧАТА В СИСТЕМЕ

Чат — это:
- интерфейс взаимодействия человека и системы
- аналитический инструмент
- навигатор по INDEX

Чат **НЕ** является:
- памятью системы
- источником истины
- местом хранения решений

Истина живёт в:
- SYSTEM CANON
- _STANDARDS
- INDEX-файлах

---

## 2. CHAT_BOOT (ЗАПУСК ЧАТА)

Каждый новый чат обязан начинаться с блока CHAT_BOOT.

### CHAT_BOOT содержит:
- краткое описание Universe Engine
- ссылку на SYSTEM CANON
- ссылку на главный INDEX
- базовые правила общения
- список актуальных UID (если есть)

### Пример CHAT_BOOT:
SYSTEM: Universe Engine active.  
CANON: SYSTEM_CANON.md  
INDEX: INDEX__UNIVERSE_ENGINE.md  
MODE: analysis / build  
ACTIVE_UID:

- UE.ENT.ENG.NAR.DRAMATIC_ARC
    
- UE.MOD.NAR.ARC_STRUCTURE
  
Без CHAT_BOOT чат считается неподготовленным.

---

## 3. ACTIVE_MAP (АКТИВНЫЙ КОНТЕКСТ)

ACTIVE_MAP — это оперативный срез текущей работы.

### ACTIVE_MAP включает:
- активные проекты
- активные сущности
- проблемные узлы
- ближайшие задачи

ACTIVE_MAP:
- хранится в INDEX
- обновляется по мере работы
- используется для фокуса чата

Чат работает **только** с тем, что указано в ACTIVE_MAP,
если не указано иное.

---

## 4. ПРАВИЛА ОБЩЕНИЯ В ЧАТЕ

### Обязательные правила:
- использовать UID при обсуждении элементов
- ссылаться на INDEX или _STANDARDS
- чётко разделять факт / предложение / анализ
- не вводить новые сущности без регистрации

### Допустимые формулировки:
- «Проблема в UE.ENT.VAL.QLT.STRUCTURE_CHECK»
- «Предлагаю добавить сущность (planned)»
- «В INDEX отсутствует связь между …»

### Запрещено:
- обсуждать элементы без UID
- принимать решения без фиксации
- полагаться на «помним из прошлого чата»

---

## 5. ФИКСАЦИЯ ИЗМЕНЕНИЙ

Любое значимое изменение проходит путь:

1. Обсуждение в чате
2. Формулировка изменения
3. Проверка на соответствие канону
4. Фиксация в INDEX
5. Обновление ACTIVE_MAP (если нужно)

Чат не считается источником изменений,
пока изменение не зафиксировано в INDEX.

---

## 6. ПЕРЕГРУЗ И СТАБИЛЬНОСТЬ

Для предотвращения перегруза:

- большой объём знаний хранится вне чатов
- в чат передаётся только нужный контекст
- используется ACTIVE_MAP
- используется UID вместо длинных описаний

Принцип:
> Чат — рабочая память,
> INDEX — долговременная память.

---

## 7. МНОЖЕСТВЕННЫЕ ЧАТЫ

Допускается работа с несколькими чатами параллельно.

Условие:
- все чаты используют один SYSTEM CANON
- все чаты читают один главный INDEX
- изменения фиксируются централизованно

Чаты не синхронизируются друг с другом напрямую,
они синхронизируются через INDEX.

---

## 8. ДИАГНОСТИКА ЧЕРЕЗ ЧАТ

Любая проблема формулируется через UID и слой.

Пример:
> Конфликт между UE.MOD.NAR.ARC_STRUCTURE и UE.ENT.ENG.NAR.DRAMATIC_ARC

Это позволяет:
- быстро локализовать проблему
- избежать лишнего контекста
- перейти к решению напрямую

---

## 9. ФИНАЛЬНОЕ ПРАВИЛО

> Чаты думают,  
> INDEX помнит,  
> CANON решает.

---

## СТАТУС

CHAT PROTOCOL v1.0  
КАНОН ЗАФИКСИРОВАН

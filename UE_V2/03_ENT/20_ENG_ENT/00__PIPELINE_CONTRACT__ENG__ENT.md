FILE: UE_V2/03_ENT/20_ENG_ENT/00__PIPELINE_CONTRACT__ENG__ENT.md
SCOPE: UE_V2 / 03_ENT / 20_ENG_ENT
DOC_TYPE: PIPELINE_CONTRACT
DOMAIN: ENG_ENT
UID: UE.V2.ENT.ENG.PIPELINE_CONTRACT.001
VERSION: 1.0.0
STATUS: ACTIVE
MODE: REPO (USAGE-ONLY, NO-EDIT)
CREATED: 2026-01-31
UPDATED: 2026-01-31
OWNER: SYS
NAV_RULE: Contract has no RAW

---

## [M] PURPOSE
Layer contract for 20_ENG_ENT.
Routes tasks to an ENG family using KEYS only and resolves addresses via layer INDEX_MANIFEST.

## [M] HARD_RULES
- No RAW inside this contract.
- Resolve targets via INDEX_MANIFEST only.
- Minimal opens: layer INDEX + 1 family entrypoint per run.

## [M] REQUIRED_KEYS (must exist in INDEX_MANIFEST)
- INDEX_MANIFEST
- PIPELINE_CONTRACT
- ENG.FAM.GVN.ROOT
- ENG.FAM.CORE.ROOT
- ENG.FAM.NRR.ROOT
- ENG.FAM.CHR.ROOT
- ENG.FAM.WRL.ROOT
- ENG.FAM.EXP.ROOT
- ENG.FAM.GEN.ROOT
- ENG.FAM.PRF.ROOT
- ENG.FAM.KNP.ROOT
- ENG.FAM.AUD.ROOT
- ENG.FAM.MET.ROOT
- ENG.FAM.MFC.ROOT
- ENG.FAM.TRN.ROOT
- ENG.FAM.POET.ROOT
- ENG.FAM.NAM.ROOT

## [M] ROUTE_SELECTOR (deterministic)
# Rule: If task mentions a domain explicitly -> map to family.
# Otherwise default -> CORE.

- GOV: ENG.FAM.GVN.ROOT
- CORE: ENG.FAM.CORE.ROOT
- NARRATIVE: ENG.FAM.NRR.ROOT
- CHARACTER: ENG.FAM.CHR.ROOT
- WORLD: ENG.FAM.WRL.ROOT
- EXPRESSION: ENG.FAM.EXP.ROOT
- GENRE: ENG.FAM.GEN.ROOT
- PRODUCTION_FORMAT: ENG.FAM.PRF.ROOT
- KNOWLEDGE_PRODUCTION: ENG.FAM.KNP.ROOT
- AUDIO: ENG.FAM.AUD.ROOT
- META_EVOLUTION: ENG.FAM.MET.ROOT
- MUSIC_FACTORY: ENG.FAM.MFC.ROOT
- TREND_GENRE: ENG.FAM.TRN.ROOT
- POET_CORPUS: ENG.FAM.POET.ROOT
- NAMING_IDENTITY: ENG.FAM.NAM.ROOT

## [M] STEP-RUN (high level)

S0) SANITY
- ensure TASK_TEXT exists
- resolve INDEX_MANIFEST via KEY: INDEX_MANIFEST
- validate REQUIRED_KEYS exist

S1) SELECT_FAMILY
- derive FAMILY_HINT from TASK_TEXT (or MODE_HINT)
- select FAMILY_KEY via ROUTE_SELECTOR (default CORE)

S2) OPEN_ENTRYPOINT
- open FAMILY_KEY (folder entrypoint) via INDEX_MANIFEST
- if MARKERS include GAP -> GAP: missing family INDEX_MANIFEST

S3) HANDOFF
- handoff to family PIPELINE (family contract will decide specialist/workset)
- NEXT: "го"

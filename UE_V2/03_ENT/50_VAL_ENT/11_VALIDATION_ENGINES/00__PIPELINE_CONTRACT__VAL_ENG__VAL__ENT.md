FILE: UE_V2/03_ENT/50_VAL_ENT/11_VALIDATION_ENGINES/00__PIPELINE_CONTRACT__VAL_ENG__VAL__ENT.md
SCOPE: UE_V2 / 03_ENT / 50_VAL_ENT / 11_VALIDATION_ENGINES
DOC_TYPE: PIPELINE_CONTRACT
DOMAIN: VAL_ENG_VAL_ENT
UID: UE.V2.ENT.PIPE.VAL_ENG_VAL_ENT.001
VERSION: 1.0.0
STATUS: ACTIVE
MODE: REPO (USAGE-ONLY, NO-EDIT)
CREATED: 2026-02-02
UPDATED: 2026-02-02
OWNER: VAL_ENT
NAV_RULE: Contract has no RAW

---

## [M] PURPOSE
PIPELINE_CONTRACT — роутер VAL_ENG engines.
Выбирает набор engines по типу артефакта и возвращает список KEYS.
RAW не хранит: всё через KEY и INDEX_MANIFEST.

## [M] HARD_RULES
- RAW запрещён внутри CONTRACT.
- Все ссылки: только KEYS.
- MODE REPO: никаких правок репозитория.
- Выход: VAL_ENG_PLAN (KEYS) + PRIORITY_ORDER + CONFLICT_RULES.

## [M] REQUIRED_KEYS
- INDEX_MANIFEST
- PIPELINE_CONTRACT
- VAL_ENG.ERROR_DETECTION
- VAL_ENG.FACT_CONSISTENCY
- VAL_ENG.LANGUAGE_LINGUISTICS

## [M] PRIORITY_ORDER (highest first)
1) VAL_ENG.ERROR_DETECTION
2) VAL_ENG.LANGUAGE_LINGUISTICS
3) VAL_ENG.FACT_CONSISTENCY
4) VAL_ENG.CULTURAL_ACCURACY (conditional)
5) VAL_ENG.HISTORICAL_ACCURACY (conditional)
6) VAL_ENG.SCIENTIFIC_PLAUSIBILITY (conditional)

## [M] SELECTION_RULES
- ALWAYS run:
  - VAL_ENG.ERROR_DETECTION
  - VAL_ENG.LANGUAGE_LINGUISTICS
- Run FACT_CONSISTENCY when artifact asserts facts, claims, timelines, or specs.
- Run CULTURAL/HISTORICAL/SCIENTIFIC only when artifact domain hints require it.

## [M] CONFLICT_RULES
- FAIL dominates (stop + required fixes).
- ASK dominates PASS/WARN.
- WARN returns required fixes but may continue.

## [M] STEP-RUN
- STEP: S0
  GOAL: Select engines based on artifact hints
  INPUTS: [TASK_TEXT, ARTIFACT_HINTS?]
  TARGETS: [INDEX_MANIFEST]
  ACTIONS:
    - Choose VAL_ENG_PLAN using SELECTION_RULES
  OUTPUTS: [VAL_ENG_PLAN]
  CHECKS: [REQUIRED_KEYS_PRESENT]
  FAIL: UE.FAIL.MISSING_KEY
  NEXT: "го"

- STEP: S1
  GOAL: Aggregate engine findings into a single decision token
  INPUTS: [VAL_ENG_FINDINGS?]
  TARGETS: []
  ACTIONS:
    - Aggregate by CONFLICT_RULES
  OUTPUTS: [VAL_ENG_AGG_DECISION, REQUIRED_FIXES, FINDINGS]
  CHECKS: [DECISION_PRODUCED]
  FAIL: UE.FAIL.GATE_FAIL
  NEXT: "го"

## [M] FAIL_CODES
- UE.FAIL.MISSING_KEY
- UE.FAIL.GATE_FAIL
- UE.FAIL.RULE_VIOLATION
- UE.FAIL.INPUT_ABSENT

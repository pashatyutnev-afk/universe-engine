FILE: UE_V2/03_ENT/10_SPC_ENT/00_TOP_GOVERNANCE_SPC_ENT/00__PIPELINE_CONTRACT__GVN__SPC__ENT.md
SCOPE: UE_V2 / 03_ENT / 10_SPC_ENT / 00_TOP_GOVERNANCE_SPC_ENT
DOC_TYPE: PIPELINE_CONTRACT
DOMAIN: GVN_SPC
UID: UE.V2.ENT.SPC.GVN.PIPELINE_CONTRACT.001
VERSION: 1.0.0
STATUS: ACTIVE
MODE: REPO (USAGE-ONLY, NO-EDIT)
CREATED: 2026-01-31
UPDATED: 2026-01-31
OWNER: SYS
NAV_RULE: Contract has no RAW

---

## [M] PURPOSE
PIPELINE_CONTRACT — навигатор действий для реалма TOP_GOVERNANCE_SPC_ENT.
Не хранит RAW-адреса. Работает через KEY и резолвит адреса в INDEX_MANIFEST.

## [M] HARD_RULES
- Запрещено хранить RAW внутри CONTRACT (без исключений).
- Все обращения: TARGET_KEY -> resolve via INDEX_MANIFEST -> open.
- Выполнение по STEP-RUN: один шаг = одна пачка действий.
- Каждый шаг должен выдавать NEXT_PROMPT: "го" или FAIL_CODE.
- Выходы SPC-ролей принимаются только в формате SPECIALIST_OUTPUT.

## [M] REQUIRED_KEYS (must exist in INDEX_MANIFEST)
- INDEX_MANIFEST
- PIPELINE_CONTRACT
- SPC.GVN.MACHINE_ARCHITECT
- SPC.GVN.GOVERNANCE_OWNER
- SPC.GVN.STANDARDS_OWNER
- SPC.GVN.DOC_CONTROLLER
- SPC.GVN.PIPELINE_ARCHITECT
- SPC.GVN.INTEGRATION_PACKER

## [M] CONTRACT_HEADER
- REALM_ID: UE_V2/03_ENT/10_SPC_ENT/00_TOP_GOVERNANCE_SPC_ENT
- DOMAIN: GVN_SPC
- ARTIFACT_TYPES: [INDEX, PIPE, ENTITY, SPECIALIST_OUTPUT, LOG]
- DEFAULT_MODE: FAST

## [M] EXEC_MODEL (how it runs)
1) Resolve INDEX_MANIFEST via KEY: INDEX_MANIFEST
2) Validate REQUIRED_KEYS exist in INDEX_MANIFEST ENTRIES
3) Build WORK_SET_KEYS using KEYS only
4) Run steps sequentially (STEP-RUN)
5) Return SPECIALIST_OUTPUT (or PATCH_NOTES) + NEXT prompt

## [M] FAIL_CODES
- UE.FAIL.INPUT_ABSENT
- UE.FAIL.MISSING_KEY
- UE.FAIL.GATE_FAIL
- UE.FAIL.OUTPUT_SCHEMA_MISSING

## [M] STEPS

- STEP: S0
  GOAL: Entry sanity and task framing
  INPUTS: [TASK_TEXT, MODE_HINT?]
  TARGETS: [INDEX_MANIFEST]
  ACTIONS:
    - Ensure TASK_TEXT exists, else FAIL
    - Decide EXEC_MODE using MODE_HINT or DEFAULT_MODE
  OUTPUTS: [TASK_TOKEN, EXEC_MODE]
  CHECKS: [TASK_PRESENT]
  FAIL: UE.FAIL.INPUT_ABSENT
  NEXT: "го"

- STEP: S1
  GOAL: Load realm navigation layer and confirm required keys
  INPUTS: [TASK_TOKEN]
  TARGETS: [INDEX_MANIFEST, PIPELINE_CONTRACT]
  ACTIONS:
    - Resolve INDEX_MANIFEST via KEY: INDEX_MANIFEST
    - Validate REQUIRED_KEYS exist in INDEX_MANIFEST ENTRIES
    - Build WORK_SET_KEYS (INDEX_MANIFEST + PIPELINE_CONTRACT + 1-3 SPC keys relevant to TASK_TOKEN)
  OUTPUTS: [WORK_SET_KEYS]
  CHECKS: [REQUIRED_KEYS_OK]
  FAIL: UE.FAIL.MISSING_KEY
  NEXT: "го"

- STEP: S2
  GOAL: Governance execution (selection + output shaping)
  INPUTS: [WORK_SET_KEYS, TASK_TOKEN, EXEC_MODE]
  TARGETS: [SPC.GVN.MACHINE_ARCHITECT, SPC.GVN.GOVERNANCE_OWNER, SPC.GVN.STANDARDS_OWNER, SPC.GVN.DOC_CONTROLLER, SPC.GVN.PIPELINE_ARCHITECT, SPC.GVN.INTEGRATION_PACKER]
  ACTIONS:
    - Resolve selected SPC keys via INDEX_MANIFEST
    - Open only minimal set required by TASK_TOKEN
    - Produce SPECIALIST_OUTPUT for the selected SPC role(s)
  OUTPUTS: [SPECIALIST_OUTPUT, PATCH_NOTES?]
  CHECKS: [SPECIALIST_OUTPUT_SCHEMA_OK, QUALITY_GATE]
  FAIL: UE.FAIL.OUTPUT_SCHEMA_MISSING
  NEXT: "го"

- STEP: S3
  GOAL: Trace and return
  INPUTS: [SPECIALIST_OUTPUT, DECISIONS?]
  TARGETS: [INDEX_MANIFEST]
  ACTIONS:
    - Summarize RESOURCES_USED and MARKER_FOUND (trace)
    - Return NEXT prompt
  OUTPUTS: [RUN_SUMMARY]
  CHECKS: [TRACE_PRESENT]
  FAIL: UE.FAIL.GATE_FAIL
  NEXT: "го"

# PROTOCOL — Audit Log Engine

## 1. Вызов

Engine вызывается:
- автоматически при любом системном действии
- при старте и завершении выполнения Engines
- при попытках изменения канона/протоколов/системных модулей
- при событиях одобрения/отклонения (approval/rejection)
- при системных операциях уровня ядра

---

## 2. Входные данные

Получает:
- идентификатор действия/события (Action ID)
- актор (engine / specialist / system)
- timestamp (временная метка)
- контекст (ссылка/контекстный идентификатор)
- затронутые сущности (affected entities)
- причина/обоснование (если применимо)

---

## 3. Логика работы

1. Захват метаданных события
2. Присвоение уникального Log ID
3. Привязка контекстных ссылок и происхождения
4. Запись в неизменяемое хранилище журнала
5. Подтверждение сохранения (persistence confirmation)
6. Возврат ссылки на запись для последующего аудита

---

## 4. Выходные данные

Формирует:
- Log Record ID
- подтверждение записи (write confirmation)
- ссылку/референс для будущих проверок

---

## 5. Условия отказа

Ошибка возникает при:
- недоступности хранилища журнала
- отсутствии обязательного контекста
- некорректной временной метке

Реакция системы:
- блокировать прогресс системы (halt progression)
- поднять критическое системное предупреждение (critical alert)
- зафиксировать факт сбоя как отдельное событие, если это возможно

---

## 6. Критерий завершения

Выполнение завершено, когда:
- запись безопасно сохранена
- ссылка/идентификатор возвращены вызывающей стороне

---

## 7. Запреты

Engine НЕ имеет права:
- редактировать существующие записи
- удалять записи
- интерпретировать действия и оценивать корректность
- подавлять или скрывать события

---

## 8. Notes / Заметки

Audit Log Engine не судит.

Он помнит.
